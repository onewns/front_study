# React의 특징

React는 웹 서비스를 개발하기 위한 MV* 패턴에서 오로지 View만을 담당하는 라이브러리입니다. 사용자의 브라우저에 그려지는 UI를 더욱 편리하게 구현할 수 있도록, 페이스북의 개발자들은 선언형, 컴포넌트 기반, 가상 DOM 등의 기본 컨셉을 통해 React를 개발하게 되었습니다. 2013년 출시 이후 컴포넌트 기반 UI 개발 프레임워크들의 전성기를 가져온 React의 특징을 살펴보면서, 어떤 장점을 통해 가장 인기있는 웹 프론트엔드 프레임워크가 되었는지 알아보겠습니다.

## 1. 선언형

선언형이란, 명령형과 대조되는 프로그래밍 패러다임입니다. '어떻게' 해야하는지 나타내는 명령형과 달리, 선언형은 '무엇'인지를 설명하는 . 즉 React는 구현 과정에 대해 고민할 필요 없이, React에서 제공하는 인터페이스(API)를 이용해 선언하면서 UI 로직을 구현할 수 있도록 개발되었습니다. JSX를 reactElement를 거쳐 HTMLElement로 만드는 과정이나 가상 DOM을 통한 update 과정에 대해 신경 쓸 필요가 없는 것입니다.

## 2. 컴포넌트

객체지향 프로그래밍에서 프로그램이 추상화된 객체들의 구성을 통해 구현되듯이, React는 컴포넌트 기반으로 UI를 구현합니다. DOM 요소들도 여러 DOM Interface를 구현하는 객체이듯이,  연관성 있는 DOM 요소들의 모임을 컴포넌트라는 객체로 만들고, 컴포넌트들의 구성을 통해 원하는 UI를 구현하는 것입니다. 이는 재사용성을 높이고, 연관성 있는 요소들이 모여있기 때문에 유지보수에도 용이하게 됩니다. 

### React의 컴포넌트 정의

react에서 컴포넌트는 클래스와 함수라는 두 가지 방식으로 정의할 수 있습니다. 클래스 컴포넌트는 상태를 정의할 수 있고, 다양한 라이프사이클 기능을 사용할 수 있지만 상대적으로 무겁고, 함수 컴포넌트는 상태가 없지만 가볍고 간단하게 컴포넌트를 구현할 수 있다는 장점이 있습니다. 최근에는 Hook을 통해 함수 컴포넌트에서도 상태를 사용할 수 있게 되었습니다.

### 리액트 엘리먼트

두 방식에는 약간의 차이가 있지만, 본질적으로는 동일한 역할을 합니다. 'props를 입력받고, ReactElement를 반환한다'는 것입니다. JSX를 반환한다는 것을 보다 엄밀히 표현하면, ReactElement를 반환한다는 것입니다. JSX는 쉽게 `React.createElement()`를 **선언**적으로 사용할 수 있게 도와주는 문법적 설탕일 뿐이며, `React.createElement()`는 ReactElement를 생성해 반환하기 때문입니다.

ReactElement는 다음과 같은 프로퍼티를 가지고 있는 객체입니다.

``` js
// ReactElement
var element = {
  // This tag allows us to uniquely identify this as a React Element
  $$typeof: REACT_ELEMENT_TYPE,
  // Built-in properties that belong on the element
  type: type,
  key: key,
  ref: ref,
  props: props,
  // Record the component responsible for creating this element.
  _owner: owner
}; 
```

`ReactDOM.render()`에서 인자로 받는 `element`는 바로 이 ReactElement 객체를 의미합니다. 그래서 `ReactDOM.render()`를 통해 React 앱을 렌더링하는 과정은 사실 다음과 같은 객체를 전달하는 것과 마찬가지입니다.

``` js
ReactDOM.render({
  type: App,
  props: {
    children: [
      // ... some ReactElements
    ]
  }
}, document.getElementById('root'));
```



## 3. 가상 DOM

---

브라우저에서 웹 페이지의 표현은 기본적으로 HTML이라는 뼈대를 통해 이루어집니다. HTML의 요소들과 텍스트들은 하나의 노드로 표현되고, 이 노드들은 DOM이라는 트리 구조로 구조화되어 있습니다. 가상 DOM이란, React에서 컴포넌트들의 구성으로 구현한 App을 트리 구조로 표현한 것입니다. 가상의 DOM 트리는 웹 페이지에서 발생하는 업데이트를 확인하고, 이전 트리와 달라진 부분만을 한 번에 일괄 처리(batch)함으로써 DOM조작의 횟수를 줄일 수 있습니다. 가상 DOM 아이디어는 Vue에서도 차용하여 사용하고 있습니다. 

반응성과 DOM요소로의 변환에 대한 고민이 필요 없고, 충분히 빠르며 버그 없이 개발할 수 있다는 것은 분명한 장점입니다. 하지만 메모리에 트리를 저장해 비교하고, HTML로 변환하는 과정은 시간과 리소스를 필요로 한다는 단점이 있습니다. 메인 스레드에서 작업이 수행되기 때문에, 경우에 따라 애니메이션 업데이트가 버벅이기도 합니다.

2019년부터 인기가 급상승한 Svelte는 이러한 단점을 개선하기 위해 가상 DOM을 사용하지 않고 있습니다. 사실 Svelte 어플리케이션이 컴파일된 결과는 모두 바닐라 JS이기 때문에, 가상 DOM 뿐 아니라 프레임워크 자체가 사라지므로 리소스 사용에 상당한 이점이 있습니다.

### Fiber

React 개발자들도 가상 DOM이 메인 스레드를 과도하게 점유하게 된다는 단점에 대해 인지하고 있었습니다. 